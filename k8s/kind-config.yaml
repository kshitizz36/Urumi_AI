# Kind cluster configuration for Urumi Platform local development
# 
# Usage:
#   kind create cluster --config kind-config.yaml
#
# Features:
#   - Single node cluster (sufficient for development)
#   - Ingress-ready with port mappings
#   - Extra mounts for local development
#
kind: Cluster
apiVersion: kind.x-k8s.io/v1alpha4
name: urumi-dev
nodes:
  - role: control-plane
    # Port mappings for ingress
    extraPortMappings:
      # HTTP traffic for stores and dashboard
      - containerPort: 80
        hostPort: 80
        protocol: TCP
      # HTTPS traffic (if TLS enabled)
      - containerPort: 443
        hostPort: 443
        protocol: TCP
      # Direct API access for debugging
      - containerPort: 30001
        hostPort: 30001
        protocol: TCP
    # Enable ingress controller
    kubeadmConfigPatches:
      - |
        kind: InitConfiguration
        nodeRegistration:
          kubeletExtraArgs:
            node-labels: "ingress-ready=true"
